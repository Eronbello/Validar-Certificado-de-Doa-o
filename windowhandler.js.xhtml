window.dswh=window.dswh||{windowId:null,clientWindowRenderMode:null,cfg:null,init:function(a,d,b){this.windowId=a;this.clientWindowRenderMode=d;this.cfg=b?b:{};var c=this.strategy[d];if(c){c.validate();c.init(!1);jsf.ajax.addOnEvent(function(a){"success"===a.status&&c.init(!0)});if(window.$&&window.PrimeFaces)$(document).on("pfAjaxComplete",function(){c.init(!0)});var e=window.onload;window.onload=function(a){try{e?e(a):null}finally{c.init(!1)}}}},strategy:{CLIENTWINDOW:{validate:function(){this.cleanupCookies();
this.assertWindowId()},init:function(a){this.overwriteLinkOnClickEvents();this.overwriteButtonOnClickEvents();dswh.utils.appendHiddenWindowIdToForms()},assertWindowId:function(){if(!window.name||1>window.name.length)window.name="tempWindowId",window.location=dswh.utils.setUrlParam(window.location.href,"dswid",null)},overwriteLinkOnClickEvents:function(){var a=dswh.cfg.tokenizedRedirect,d=dswh.utils.isHtml5()&&dswh.cfg.storeWindowTreeOnLinkClick;if(a||d)for(var b=document.getElementsByTagName("a"),
c=0;c<b.length;c++){var e=b[c];!0===dswh.strategy.CLIENTWINDOW.isHrefDefined(e)&&(e.onclick?(""+e.onclick).match(".*storeWindowTree().*")||function(){var c=e.onclick;e.onclick=function(b){b=b||window.event;b=c.bind(this)(b);if("undefined"===typeof b||!0===b)if(d&&dswh.strategy.CLIENTWINDOW.storeWindowTree(),a)return dswh.strategy.CLIENTWINDOW.tokenizedRedirect(this),!1;return b}}():e.onclick=function(){d&&dswh.strategy.CLIENTWINDOW.storeWindowTree();return a?(dswh.strategy.CLIENTWINDOW.tokenizedRedirect(this),
!1):!0})}},overwriteButtonOnClickEvents:function(){if(dswh.utils.isHtml5()&&dswh.cfg.storeWindowTreeOnButtonClick)for(var a=document.getElementsByTagName("input"),d=0;d<a.length;d++){var b=a[d];if("submit"===b.getAttribute("type")||"button"===b.getAttribute("type"))b.onclick?(""+b.onclick).match(".*storeWindowTree().*")||function(){var a=b.onclick;b.onclick=function(b){b=b||window.event;return dswh.strategy.CLIENTWINDOW.storeWindowTree()&&a.bind(this)(b)}}():b.onclick=function(){dswh.strategy.CLIENTWINDOW.storeWindowTree();
return!0}}},isHrefDefined:function(a){return a.href&&0<a.href.length?!0:!1},tokenizedRedirect:function(a){var d=dswh.utils.generateRequestToken();dswh.utils.storeCookie("dsrwid-"+d,dswh.windowId,3);window.location=dswh.utils.setUrlParam(a.href,"dsrid",d)},storeWindowTree:function(){for(var a=document.getElementsByTagName("head")[0].childNodes,d=[],b=0,c=0;c<a.length;c++){var e=a[c].tagName;e&&(dswh.utils.equalsIgnoreCase(e,"link")&&dswh.utils.equalsIgnoreCase(a[c].getAttribute("type"),"text/css"))&&
(e=a[c].getAttribute("media"),!e||dswh.utils.equalsIgnoreCase(e,"all")||dswh.utils.equalsIgnoreCase(e,"screen"))&&(d[b++]=a[c].getAttribute("href"))}localStorage.setItem(window.name+"_css",dswh.utils.stringify(d));a=document.getElementsByTagName("body")[0];localStorage.setItem(window.name+"_body",a.innerHTML);d={};for(c=0;c<a.attributes.length;c++)b=a.attributes[c],d[b.name]=b.value;localStorage.setItem(window.name+"_bodyAttributes",dswh.utils.stringify(d));localStorage.setItem(window.name+"_scrollTop",
(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0));localStorage.setItem(window.name+"_scrollLeft",(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0))},cleanupCookies:function(){var a=dswh.utils.getUrlParameter(window.location.href,"dsrid");a&&dswh.utils.expireCookie("dsrwid-"+a)}},LAZY:{validate:function(){this.cleanupCookies();this.assertWindowId()},init:function(a){dswh.utils.appendHiddenWindowIdToForms()},
assertWindowId:function(){var a=dswh.utils.getUrlParameter(window.location.href,"dswid");!window.name||1>window.name.length?a?dswh.cfg.initialRedirectWindowId&&a===dswh.cfg.initialRedirectWindowId?window.name=dswh.cfg.initialRedirectWindowId:(window.name="tempWindowId",window.location=dswh.utils.setUrlParam(window.location.href,"dswid",null)):dswh.windowId&&(window.name=dswh.windowId):"tempWindowId"===window.name?window.name=a?a:dswh.windowId:window.name!==a&&(window.location=dswh.utils.setUrlParam(window.location.href,
"dswid",window.name))},cleanupCookies:function(){var a=dswh.utils.getUrlParameter(window.location.href,"dswid");a&&dswh.utils.expireCookie("dsrwid-"+a)}}},utils:{isHtml5:function(){try{return!!localStorage.getItem}catch(a){return!1}},stringify:function(a){return JSON?JSON.stringify(a):a.join("|||")},unstringify:function(a){return JSON?JSON.parse(a):a.split("|||")},equalsIgnoreCase:function(a,d){return a||d?a&&d?a.toLowerCase()===d.toLowerCase():!1:!0},getUrlParameter:function(a,d){var b=document.createElement("a");
b.href=a;if((b=b.search)&&0<b.length)for(var b=b.substring(1).split("\x26"),c=0;c<b.length;c++){var e=b[c].split("\x3d");if(e[0]===d)return 1<e.length?e[1]:""}return null},setUrlParam:function(a,d,b){a=a.split(/&|\?/g);for(var c="",e=0,k=!1,h=0;null!=a&&h<a.length;h++){var f=a[h].split("\x3d");if(1==f.length)c=f[0];else if(f[0]!=d)var g=0<e++?"\x26":"?",c=c+g+f[0]+"\x3d"+f[1];else k=!0,b&&(g=0<e++?"\x26":"?",c=c+g+d+"\x3d"+b)}!k&&b&&(g=0<e++?"\x26":"?",c=c+g+d+"\x3d"+b);return c},appendHiddenWindowIdToForms:function(){for(var a=
document.getElementsByTagName("form"),d=0;d<a.length;d++){var b=a[d],c=b.elements.dspwid;c||(c=document.createElement("INPUT"),c.setAttribute("name","dspwid"),c.setAttribute("type","hidden"),b.appendChild(c));c.setAttribute("value",dswh.windowId)}},expireCookie:function(a){var d=new Date;d.setTime(d.getTime()-864E6);d=";max-age\x3d0;expires\x3d"+d.toGMTString();document.cookie=a+"\x3d"+d+"; path\x3d/"},generateRequestToken:function(){return Math.floor(999*Math.random())},storeCookie:function(a,d,
b){var c=new Date;c.setTime(c.getTime()+1E3*b);b="; expires\x3d"+c.toGMTString();document.cookie=a+"\x3d"+d+b+"; path\x3d/"}}};
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),b=this,c=function(){},e=function(){return b.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;e.prototype=new c;return e});